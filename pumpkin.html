<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resumify | Pumpkin Template</title>
    <link rel="stylesheet" href="css/pumpkin.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Reddit+Mono:wght@200..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container-fluid">
      <div class="row d-flex justify-content-center">
        <div class="col-md-6 mt-5 px-5" id="stylingSection">
          <div class="mb-3">
            <h1 class="text-center mb-3">Build Your Resume</h1>
            <p class="text-center">You're Editing The Floral Template.</p>
          </div>
          <div class="mb-3">
            <div class="ra error-alert" style="display: none"></div>
          </div>
          <div class="mb-5">
            <h3>Styling</h3>
            <hr />
            <div class="mb-3">
              <label for="font-family-selector" class="form-label"
                >Select Font Family</label
              >
              <select id="font-family-selector" class="form-select rounded-0">
                <option
                  value="'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;"
                >
                  Default (Franklin Gothic)
                </option>
                <option value="'Montserrat', sans-serif">Montserrat</option>
                <option value="'Noto Sans', sans-serif">Noto Sans</option>
                <option value="'Poppins', sans-serif">Poppins</option>
                <option value="'Reddit Mono', monospace">Reddit Mono</option>
                <option value="'Roboto', sans-serif">Roboto</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="heading-font-size">Select Heading Size</label>
              <input
                type="number"
                class="form-control rounded-0"
                id="heading-font-size"
                value="30"
              />
            </div>
            <div class="mb-3">
              <label for="sub-heading-font-size">Select Sub-Heading Size</label>
              <input
                type="number"
                class="form-control rounded-0"
                id="sub-heading-font-size"
                value="20"
              />
            </div>
            <div class="mb-3">
              <label for="body-font-size">Select Body Size</label>
              <input
                type="number"
                class="form-control rounded-0"
                id="body-font-size"
                value="16"
              />
            </div>
          </div>
          <div class="mb-5">
            <h3>Work Experiece</h3>
            <hr />
            <div class="mb-3">
              <button
                type="button"
                class="btn btn-outline-primary rounded-0"
                onclick="addWorkExperience()"
              >
                Add Work Experiece
              </button>
            </div>
          </div>
          <div class="mb-5">
            <h3>Education</h3>
            <hr />
            <div class="mb-3">
              <button
                type="button"
                class="btn btn-outline-primary rounded-0"
                onclick="addEducation()"
              >
                Add Education
              </button>
            </div>
          </div>
          <div class="mb-5">
            <h3>References</h3>
            <hr />
            <div class="mb-3">
              <button
                type="button"
                class="btn btn-outline-primary rounded-0"
                onclick="addReferencePlaceholder()"
              >
                Add References
              </button>
            </div>
          </div>
          <div class="mb-3">
            <button
              type="button"
              class="btn btn-outline-primary rounded-0 w-100"
              onclick="saveResume()"
            >
              Save Resume
            </button>
          </div>
        </div>
        <div class="col-md-6 d-flex justify-content-end">
          <div class="resume-container">
            <div class="row">
              <div class="col-5">
                <div class="heading" contenteditable="true">
                  john jacob jingleheimer schmidt
                </div>
              </div>
              <div class="col-7 border-left">
                <div class="body" contenteditable="true">
                  123 St. John's Street
                </div>
                <div class="body" contenteditable="true">
                  St. Johns, Newfoundland A2A 2L2
                </div>
                <div class="body" contenteditable="true">
                  john.jacob@email.com
                </div>
                <div class="body" contenteditable="true">(123) 457-1212</div>
              </div>
            </div>
            <div class="row d-flex mt-3">
              <div class="col-5">
                <div class="sub-heading float-end">Objective</div>
              </div>
              <div class="col-7 border-left">
                <div class="body" contenteditable="true">
                  Enter your objective.
                </div>
              </div>
            </div>
            <div class="row d-flex mt-3">
              <div class="col-5">
                <div class="sub-heading float-end">Work Experience</div>
              </div>
              <div class="col-7 border-left">
                <div class="jobExperience">
                  <div class="section-bold" contenteditable="true">
                    Company Name
                  </div>
                  <div class="text-muted" contenteditable="true">
                    JAN 1 1900 - PRESENT
                  </div>
                  <div class="body" contenteditable="true">
                    <ul>
                      <li>Duty</li>
                      <li>Duty</li>
                      <li>Duty</li>
                      <li>Duty</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="row d-flex mt-3">
              <div class="col-5">
                <div class="sub-heading float-end">Education</div>
              </div>
              <div class="col-7 border-left">
                <div class="educationArea mb-3">
                  <div class="section-bold" contenteditable="true">
                    Memorial University of Newfoundland
                  </div>
                  <div class="text-muted" contenteditable="true">
                    JAN 1 1900 - JAN 1 1905
                  </div>
                  <div class="body" contenteditable="true">
                    ​​You might want to include your GPA here and a brief
                    summary of relevant coursework, awards, and honors.​
                  </div>
                </div>
              </div>
            </div>
            <div class="row d-flex mt-3">
              <div class="col-5">
                <div class="sub-heading float-end">References</div>
              </div>
              <div class="col-7 border-left">
                <div id="referencesArea">
                  <div class="reference mb-3" id="defaultRef">
                    References available upon request.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function saveResume() {
        const resumeContainer = document.querySelector(".resume-container");

        html2pdf()
          .from(resumeContainer)
          .set({
            filename: "resume.pdf",
            html2canvas: { scale: 2 },
            jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
          })
          .save();
      }

      // Function to add work experience section
      function addWorkExperience() {
        const jobExperiences = document.querySelectorAll(".jobExperience");
        const newJobExperience = jobExperiences[0].cloneNode(true);
        jobExperiences[0].parentNode.insertBefore(
          newJobExperience,
          jobExperiences[0]
        );
      }

      function addWorkExperience() {
        const jobExperiences = document.querySelectorAll(".jobExperience");
        const newJobExperience = jobExperiences[0].cloneNode(true);
        jobExperiences[0].parentNode.insertBefore(
          newJobExperience,
          jobExperiences[0]
        );
      }

      function addEducation() {
        const education = document.querySelectorAll(".educationArea");
        const neweducation = education[0].cloneNode(true);
        education[0].parentNode.insertBefore(neweducation, education[0]);
      }

      document.addEventListener("contextmenu", function (e) {
        e.preventDefault();
        const jobExperience = e.target.closest(".jobExperience");
        const education = e.target.closest(".educationArea");

        if (jobExperience) {
          if (
            jobExperience.parentNode.querySelectorAll(".jobExperience").length >
            1
          ) {
            jobExperience.parentNode.removeChild(jobExperience);
          } else {
            let errorAlert = document.querySelector(".error-alert");
            errorAlert.style.display = "block";
            errorAlert.textContent =
              "You need to have at least 1 job experience field.";
            setTimeout(() => {
              errorAlert.style.display = "none";
            }, 3000);
          }
        } else if (education) {
          if (
            education.parentNode.querySelectorAll(".educationArea").length > 1
          ) {
            education.parentNode.removeChild(education);
          } else {
            let errorAlert = document.querySelector(".error-alert");
            errorAlert.style.display = "block";
            errorAlert.textContent =
              "You need to have at least 1 education field.";
            setTimeout(() => {
              errorAlert.style.display = "none";
            }, 3000);
          }
        }
      });

      // Font family selector
      document
        .getElementById("font-family-selector")
        .addEventListener("change", function () {
          const selectedFont = this.value;
          document.querySelector(".resume-container").style.fontFamily =
            selectedFont;
        });

      document
        .getElementById("heading-font-size")
        .addEventListener("change", function () {
          const headingSize = this.value;
          const headingElements = document.querySelectorAll(
            ".resume-container .heading"
          );

          headingElements.forEach(function (headingElement) {
            headingElement.style.fontSize = headingSize + "px";
          });
        });

      document
        .getElementById("sub-heading-font-size")
        .addEventListener("change", function () {
          const subheadingSize = this.value;
          const subheadingElements = document.querySelectorAll(
            ".resume-container .sub-heading"
          );

          subheadingElements.forEach(function (subheadingElement) {
            subheadingElement.style.fontSize = subheadingSize + "px";
          });
        });

      document
        .getElementById("body-font-size")
        .addEventListener("change", function () {
          const bodySize = this.value;
          const bodyElements = document.querySelectorAll(
            ".resume-container .body"
          );

          bodyElements.forEach(function (bodyElement) {
            bodyElement.style.fontSize = bodySize + "px";
          });
        });

      function addReferencePlaceholder() {
        const defaultRef = document.getElementById("defaultRef");

        defaultRef.style.display = "none";
        // Create a new reference element
        var referenceElement = document.createElement("div");
        referenceElement.classList.add("reference", "mb-3");

        // Create elements for name, role, and contact
        var nameElement = document.createElement("div");
        nameElement.classList.add("section-bold");
        nameElement.setAttribute("contenteditable", "true");
        nameElement.textContent = "John Doe";

        var roleElement = document.createElement("div");
        roleElement.classList.add("text-muted");
        roleElement.setAttribute("contenteditable", "true");
        roleElement.textContent = "Friend";

        var contactElement = document.createElement("div");
        contactElement.classList.add("body");
        contactElement.setAttribute("contenteditable", "true");
        contactElement.textContent = "(123) 456-7890";

        // Append name, role, and contact elements to the reference element
        referenceElement.appendChild(nameElement);
        referenceElement.appendChild(roleElement);
        referenceElement.appendChild(contactElement);

        // Append the reference element to the references area
        var referencesArea = document.getElementById("referencesArea");
        referencesArea.appendChild(referenceElement);
      }

      document.addEventListener("contextmenu", function (e) {
        e.preventDefault();
        const reference = e.target.closest(".reference");
        if (
          reference &&
          reference.parentNode.querySelectorAll(".reference").length > 1
        ) {
          reference.parentNode.removeChild(reference);
        }
      });
    </script>
  </body>
</html>
